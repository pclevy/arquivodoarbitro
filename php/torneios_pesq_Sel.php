<html>	<head>		<title>Consultar Torneios SM!</title>		<script LANGUAGE="JavaScript" SRC="../../js/jstrim.js"></script>		<script language="JavaScript" type="text/javascript">			var List_torneios_reg=new Array();			var List_torneios_nome=new Array();			var List_torneios_arquivo=new Array();			var List_torneios_remetente=new Array();			var List_torneios_prog=new Array();			var List_torneios_datarec=new Array();  			var specialChars =				[					{val:"a",let:"áàãâä"},					{val:"e",let:"éèêë"},					{val:"i",let:"íìîï"},					{val:"o",let:"óòõôö"},					{val:"u",let:"úùûü"},					{val:"c",let:"ç"},					{val:"A",let:"ÁÀÃÂÄ"},					{val:"E",let:"ÉÈÊË"},					{val:"I",let:"ÍÌÎÏ"},					{val:"O",let:"ÓÒÕÔÖ"},					{val:"U",let:"ÚÙÛÜ"},					{val:"C",let:"Ç"},					{val:"",let:"?!()"}				];							function pesq_nome(strDigitada)			{				strPesq=trim(strDigitada).toUpperCase();								document.getElementById("torneio_reg").value='';				lista_loc=document.getElementById("torneios_list");								tamlista=lista_loc.length;				//alert(tamlista);				for(i=0;i<tamlista;i++)				{					lista_loc.remove(0);				}								//alert(List_Enxadr_nome.length + " - " + lista_loc.length);				for(i=0;i<List_torneios_nome.length;i++)				//for(i=List_Enxadr_nome.length-1;i>=0;i--)				{					if(List_torneios_nome[i].toUpperCase().indexOf(strPesq)>=0 || strPesq=="")					{						//alert(List_Enxadr_nome.length + "  -  " + i);						//inserir						try						{							lista_loc.add(new Option(List_torneios_nome[i], i), null);							//lista_loc.add(new Option(List_Enxadr_nome[i], List_Enxadr_reg[i]), null);							//alert(i);						}						catch(e)						{	//in IE, try the below version instead of add()							lista_loc.add(new Option(List_torneios_nome[i], i));							//lista_loc.add(new Option(List_Enxadr_nome[i], List_Enxadr_reg[i]));						}					}				}			}						function Select_Click(elemento,typeClick)			{				indice=elemento.options[elemento.selectedIndex].value;				document.getElementById('torneio_reg').value=List_torneios_reg[indice];				document.getElementById('torneio').value=List_torneios_nome[indice];				document.getElementById('arquivo').value=List_torneios_arquivo[indice];				document.getElementById('remetente').value=List_torneios_remetente[indice];				document.getElementById('prog').value=List_torneios_prog[indice];				document.getElementById('datarec').value=List_torneios_datarec[indice];				if(typeClick=='dbl')				{					if(document.getElementById('prog').value=='SM')															{document.getElementById('torneios_pesq').action='index.php?page=torneio.php&torneio_reg='+List_torneios_reg[indice];}					else if(document.getElementById('prog').value=='SP')					{document.getElementById('torneios_pesq').action='LerArquivoSP.php';}					else					{document.getElementById('torneios_pesq').action='LerArquivoVG.php?arq='+List_torneios_arquivo[indice]+'&dtrec='+List_torneios_datarec[indice]+'&remetente='+List_torneios_remetente[indice];}					document.getElementById('SubmitButton').click();				}			}						function ListaTorneiosSel(elemento)			{				TipoProg=elemento.options[elemento.selectedIndex].value;				lista_loc=document.getElementById("torneios_list");				tamlista=lista_loc.length;				for(i=0;i<tamlista;i++)				{					lista_loc.remove(0);				}				for(i=0;i<List_torneios_nome.length;i++)				{				//alert(TipoProg);					if(List_torneios_prog[i]==TipoProg || TipoProg=='qq')					{						try						{							lista_loc.add(new Option(List_torneios_nome[i], i), null);						}						catch(e)						{//in IE, try the below version instead of add()							lista_loc.add(new Option(List_torneios_nome[i], i));						}					}				}				//alert(TipoProg);			}					</script>	</head>		<body bgcolor="eeeeff">		<font size="3"><b>AF Paulo Levy</b></font><br>		<font size="6">Arquivo do Árbitro</font><br>		<font size="3"><b>Pesquisa de Torneios</b> - por <b><u>Título</u></b> e/ou <b><u>Programa Gerador</u></b></font><br>		<font size='2' color='red'><b>Em construção</b>: os dados aqui são parciais e experimentais!!</font><br>		<br>		<!form name='torneios_pesq' id='torneios_pesq' action='LerArquivoSM.php' method='post' autocomplete="off">		<form name='torneios_pesq' id='torneios_pesq' onsubmit='Select_Click(torneios_list,"dbl")' method='post' autocomplete="off">			<div style="width:650;background-color:#EDFAD6;line-height:30px;padding:1;border:1px solid #2266AA;">				<table width='100%'>					<tr>						<td valign='top'>Nome:</td>						<td colspan='4'>							<input name='torneio' id='torneio' type='text' value='' size='49' maxlenght='60' onkeyup='pesq_nome(this.value);'>							&nbsp; &nbsp; Programa: 							<!input  name='tipoprog' id='tipoprog' type='text' value='' size='2'>							<select id='tipoprog' name='tipoprog' size='1' onchange='ListaTorneiosSel(this);'>								<option selected=true value="qq">Todos</option>								<option value="SM">Swiss Manager</option>								<option value="SP">Swiss Perfect</option>								<option value="VG">Vega</option>							</select>														<input name='torneio_reg' id='torneio_reg' type='hidden' value='' size='6'>							<input name='arquivo' id='arquivo' type='hidden' value='' size='128'>							<input name='remetente' id='remetente' type='hidden' value='' size='128'>							<input name='prog' id='prog' type='hidden' value='' size='2'>							<input name='datarec' id='datarec' type='hidden' value='' size='128'>							<!-- <select name='torneios_list' id='torneios_list' size='15' style="width:500px" onclick='indice=this.options[this.selectedIndex].value;torneio_reg.value=List_torneios_reg[indice];torneio.value=List_torneios_nome[indice];arquivo.value=List_torneios_arquivo[indice];datarec.value=List_torneios_datarec[indice];'><br> -->							<select name='torneios_list' id='torneios_list' size='15' style="width:500px" onclick='Select_Click(this,"clk");' ondblclick='Select_Click(this,"dbl");'><br>								<!option value="">Digite acima ou Selecione aqui ...<!/option>								<?php								//echo " yyyyy ";exit;									// Lendo String de conexão									//$file = "../../../config/conexao.cfg"; //UERJ									$file = "../config/conexao_ca.cfg";									$fh = fopen($file, 'r');									$conteudo = explode("*", fread($fh, filesize($file)));									$strconexao = trim($conteudo[0]);									$codificacao = trim($conteudo[1]);									fclose($fh);									//$strconexao = "host=localhost dbname=esfinge_arbitro port=5432 user=esfinge_arbitro password=scly1411";									//echo " ******* $strconexao ----  $codificacao *********";									//echo "<script language='javascript' type='text/javascript'>alert('".$strconexao."');</script>";																		//exit;																		$conexao=pg_connect($strconexao) or die("erro na conexão");									//Selecionando registros									//$sql =pg_query($conexao,"SELECT reg, nome, arquivo, remetente, prog, data_rec FROM torneios WHERE (status='A') ORDER BY nome") or die("erro de SELECT");									//$sql =pg_query($conexao,"SELECT reg, nome, arquivo, remetente, prog, data_rec FROM torneios ORDER BY data_rec DESC");// or die("erro de SELECT");									$sql =pg_query($conexao,"SELECT reg, nome, arquivo, remetente, prog, data_rec FROM torneios WHERE (status='A') ORDER BY data_rec DESC") or die("erro de SELECT");									$resultado=pg_num_rows($sql);									//echo "YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY --- $resultado";exit;									//echo "<script language='javascript' type='text/javascript'>alert('"."--".$resultado."');</script>";exit;																		$i=0;								?>								<?php while ($i<$resultado)								{									$reg = trim(pg_result($sql,$i,'reg'));									$nome = trim(pg_result($sql,$i,'nome'));									$arquivo = trim(pg_result($sql,$i,'arquivo'));									$remetente = trim(pg_result($sql,$i,'remetente'));									$prog = trim(pg_result($sql,$i,'prog'));									$datarec = trim(pg_result($sql,$i,'data_rec'));																		if($codificacao=='UTF-8')									{										//$nome = utf8_decode($nome);										//$remetente = utf8_decode($remetente);									}																		//$nome_slash = addslashes($nome);									$nome_slash = $nome;																		echo	"													<script language='JavaScript' type='text/javascript'>														z='$i';														nome='$nome_slash';														List_torneios_reg[z]='$reg';														List_torneios_nome[z]='$nome_slash';															List_torneios_arquivo[z]='$arquivo';														List_torneios_remetente[z]='$remetente';														List_torneios_prog[z]='$prog';														List_torneios_datarec[z]='$datarec';														</script>												";								?>								<option value='<?php echo $i; ?>'><?php echo $prog.': '.$nome_slash; ?></option>								<?php									$i++;								}								?>							</select>						</td>					</tr>					<tr>						<td><input type='submit' id='SubmitButton' onClick="if(torneio_reg.value<1){alert('Clique em um nome da Lista e/ou escolha um outro critério!!');torneios_list.focus(); return false;}" name='Enviar' value='Enviar'></td>						<td style="text-align:center;">							<span title="Prefixos: &#10; &nbsp;- SM:Torneio gerenciado p/App 'Swiss Manager' &#10; &nbsp;- SP:Torneio gerenciado p/App 'Swiss Perfect' &#10; &nbsp;- VG:Torneio gerenciado p/App 'Vega'" style="font-family:arial;font-size:12px;">'SM:Swiss Manager' - 'SP:Swis Perfect' - 'VG:Vega'</span>						</td>						<td style="text-align:right;"><a href="index.php" target="_top">Voltar à Página Principal</a></td>					</tr>				</table>							</div>		</form>	</body></html>